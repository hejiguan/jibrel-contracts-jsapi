'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.estimateGas=exports.Transfer=exports.getPastEvents=exports.allEvents=exports.transfer=exports.balanceOf=exports.totalSupply=void 0;var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),totalSupply=exports.totalSupply=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20Schemas.totalSupply);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,(0,_initWeb2.default)(d,e),g=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(g.totalSupply.call)());case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),balanceOf=exports.balanceOf=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20Schemas.balanceOf);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.owner,(0,_initWeb2.default)(d,e),h=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(h.balanceOf.call)(g));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),transfer=exports.transfer=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i,j,k;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20Schemas.transfer);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.privateKey,h=c.gasLimit,i=c.to,j=c.value,(0,_initWeb2.default)(d,e),k=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',(0,_submitContractTx2.default)({privateKey:g,gasLimit:h,args:[i,j],method:k.transfer}));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),allEvents=exports.allEvents=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20Schemas.allEvents);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.options,h=c.callback,(0,_initWeb2.default)(d,e),i=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',(0,_eventUtils.subscribeToContractEvent)(i.allEvents,g,h));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),getPastEvents=exports.getPastEvents=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20Schemas.getPastEvents);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.event,h=c.options,(0,_initWeb2.default)(d,e),i=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',(0,_eventUtils.getPastContractEvents)(i[g],h));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),Transfer=exports.Transfer=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20Schemas.Transfer);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.options,h=c.callback,(0,_initWeb2.default)(d,e),i=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',(0,_eventUtils.subscribeToContractEvent)(i.Transfer,g,h));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),estimateGas=exports.estimateGas=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20Schemas.estimateGas);case 2:return c=a.sent,a.abrupt('return',(0,_estimateGasForContractMethod2.default)(contractInterface,c));case 4:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),_bluebird=require('bluebird'),_bluebird2=_interopRequireDefault(_bluebird),_initWeb=require('./utils/initWeb3'),_initWeb2=_interopRequireDefault(_initWeb),_submitContractTx=require('./utils/submitContractTx'),_submitContractTx2=_interopRequireDefault(_submitContractTx),_getContractInstance=require('./utils/getContractInstance'),_getContractInstance2=_interopRequireDefault(_getContractInstance),_estimateGasForContractMethod=require('./utils/estimateGasForContractMethod'),_estimateGasForContractMethod2=_interopRequireDefault(_estimateGasForContractMethod),_eventUtils=require('./utils/eventUtils'),_validationSchemas=require('./validationSchemas');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var contractInterface='ERC20';'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.estimateGas=exports.isTransferFromAllowed=exports.isApprovedSpendingAllowed=exports.isApproveAllowed=exports.isTransferAllowed=exports.isSpendingAllowed=exports.isReceivingAllowed=exports.isRegulated=void 0;var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),isRegulated=exports.isRegulated=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20ValidatableSchemas.isRegulated);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,(0,_initWeb2.default)(d,e),g=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(g.isRegulated.call)());case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),isReceivingAllowed=exports.isReceivingAllowed=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20ValidatableSchemas.isReceivingAllowed);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.account,h=c.value,(0,_initWeb2.default)(d,e),i=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(i.isReceivingAllowed.call)(g,h));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),isSpendingAllowed=exports.isSpendingAllowed=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20ValidatableSchemas.isSpendingAllowed);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.account,h=c.value,(0,_initWeb2.default)(d,e),i=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(i.isSpendingAllowed.call)(g,h));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),isTransferAllowed=exports.isTransferAllowed=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i,j;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20ValidatableSchemas.isTransferAllowed);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.from,h=c.to,i=c.value,(0,_initWeb2.default)(d,e),j=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(j.isTransferAllowed.call)(g,h,i));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),isApproveAllowed=exports.isApproveAllowed=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i,j;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20ValidatableSchemas.isApproveAllowed);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.from,h=c.spender,i=c.value,(0,_initWeb2.default)(d,e),j=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(j.isApproveAllowed.call)(g,h,i));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),isApprovedSpendingAllowed=exports.isApprovedSpendingAllowed=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i,j;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20ValidatableSchemas.isApprovedSpendingAllowed);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.from,h=c.spender,i=c.value,(0,_initWeb2.default)(d,e),j=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(j.isApprovedSpendingAllowed.call)(g,h,i));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),isTransferFromAllowed=exports.isTransferFromAllowed=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i,j,k;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20ValidatableSchemas.isTransferFromAllowed);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.contractAddress,g=c.spender,h=c.from,i=c.to,j=c.value,(0,_initWeb2.default)(d,e),k=(0,_getContractInstance2.default)(f,contractInterface),a.abrupt('return',_bluebird2.default.promisify(k.isTransferFromAllowed.call)(g,h,i,j));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),estimateGas=exports.estimateGas=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ERC20ValidatableSchemas.estimateGas);case 2:return c=a.sent,a.abrupt('return',(0,_estimateGasForContractMethod2.default)(contractInterface,c));case 4:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),_bluebird=require('bluebird'),_bluebird2=_interopRequireDefault(_bluebird),_initWeb=require('./utils/initWeb3'),_initWeb2=_interopRequireDefault(_initWeb),_getContractInstance=require('./utils/getContractInstance'),_getContractInstance2=_interopRequireDefault(_getContractInstance),_estimateGasForContractMethod=require('./utils/estimateGasForContractMethod'),_estimateGasForContractMethod2=_interopRequireDefault(_estimateGasForContractMethod),_validationSchemas=require('./validationSchemas');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var contractInterface='ERC20Validatable';'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.estimateGas=exports.getBalance=exports.sendTransaction=void 0;var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_objectWithoutProperties2=require('babel-runtime/helpers/objectWithoutProperties'),_objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),sendTransaction=exports.sendTransaction=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ETHSchemas.sendTransaction);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=(0,_objectWithoutProperties3.default)(c,['rpcaddr','rpcport']),(0,_initWeb2.default)(d,e),a.abrupt('return',(0,_submitTx2.default)(f));case 6:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),getBalance=exports.getBalance=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ETHSchemas.getBalance);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.address,g=c.defaultBlock,(0,_initWeb2.default)(d,e),a.abrupt('return',_bluebird2.default.promisify(web3.eth.getBalance)(f,g));case 6:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),estimateGas=exports.estimateGas=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_validationSchemas.validate)(b,_validationSchemas.ETHSchemas.estimateGas);case 2:return c=a.sent,d=c.rpcaddr,e=c.rpcport,f=c.data,g=c.to,h=c.value,(0,_initWeb2.default)(d,e),a.abrupt('return',(0,_txUtils.getGasLimit)({data:f,to:g,value:h}));case 6:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),_bluebird=require('bluebird'),_bluebird2=_interopRequireDefault(_bluebird),_initWeb=require('./utils/initWeb3'),_initWeb2=_interopRequireDefault(_initWeb),_submitTx=require('./utils/submitTx'),_submitTx2=_interopRequireDefault(_submitTx),_txUtils=require('./utils/txUtils'),_validationSchemas=require('./validationSchemas');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=estimateGasForContractMethod;var _initWeb=require('./initWeb3'),_initWeb2=_interopRequireDefault(_initWeb),_txUtils=require('./txUtils'),_getContractInstance=require('./getContractInstance'),_getContractInstance2=_interopRequireDefault(_getContractInstance);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function estimateGasForContractMethod(a,b){var c=b.rpcaddr,d=b.rpcport,e=b.contractAddress,f=b.method,g=b.args;(0,_initWeb2.default)(c,d);var h=(0,_getContractInstance2.default)(e,a);return(0,_txUtils.getContractGasLimit)(h[f],null,g)}'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _objectWithoutProperties2=require('babel-runtime/helpers/objectWithoutProperties'),_objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2);exports.subscribeToContractEvent=subscribeToContractEvent,exports.getPastContractEvents=getPastContractEvents;var _bluebird=require('bluebird'),_bluebird2=_interopRequireDefault(_bluebird),_events=require('events'),_events2=_interopRequireDefault(_events);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function subscribeToContractEvent(a,b,c){var d=new _events2.default,e=b.filter,f=(0,_objectWithoutProperties3.default)(b,['filter']);return a(e,f,function(a,b){return a?(d.emit('error',a),void c(a)):void(d.emit('data',b),c(null,b))}),d}function getPastContractEvents(a,b){var c=b.filter,d=(0,_objectWithoutProperties3.default)(b,['filter']),e=a(c,d);return _bluebird2.default.promisify(e.get)()}'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=getAddressFromPrivateKey;var _cryptoJs=require('crypto-js'),_cryptoJs2=_interopRequireDefault(_cryptoJs),_elliptic=require('elliptic');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ec=new _elliptic.ec('secp256k1');function getAddressFromPrivateKey(a){var b=ec.genKeyPair();b._importPrivate(a,'hex');var c=b.getPublic(!1,'hex').slice(2),d=_cryptoJs2.default.enc.Hex.parse(c),e=_cryptoJs2.default.SHA3(d,{outputLength:256}),f=e.toString(_cryptoJs2.default.enc.Hex).slice(24);return f}'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _memoize=require('./memoize'),_memoize2=_interopRequireDefault(_memoize);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ERC20ABI=[{constant:!1,inputs:[{name:'_spender',type:'address'},{name:'_value',type:'uint256'}],name:'approve',outputs:[{name:'success',type:'bool'}],payable:!1,type:'function'},{constant:!0,inputs:[],name:'totalSupply',outputs:[{name:'',type:'uint256'}],payable:!1,type:'function'},{constant:!1,inputs:[{name:'_from',type:'address'},{name:'_to',type:'address'},{name:'_value',type:'uint256'}],name:'transferFrom',outputs:[{name:'success',type:'bool'}],payable:!1,type:'function'},{constant:!0,inputs:[{name:'_owner',type:'address'}],name:'balanceOf',outputs:[{name:'balance',type:'uint256'}],payable:!1,type:'function'},{constant:!1,inputs:[{name:'_to',type:'address'},{name:'_value',type:'uint256'}],name:'transfer',outputs:[{name:'success',type:'bool'}],payable:!1,type:'function'},{constant:!0,inputs:[{name:'_owner',type:'address'},{name:'_spender',type:'address'}],name:'allowance',outputs:[{name:'remaining',type:'uint256'}],payable:!1,type:'function'},{anonymous:!1,inputs:[{indexed:!0,name:'from',type:'address'},{indexed:!0,name:'to',type:'address'},{indexed:!1,name:'value',type:'uint256'}],name:'Transfer',type:'event'},{anonymous:!1,inputs:[{indexed:!0,name:'owner',type:'address'},{indexed:!0,name:'spender',type:'address'},{indexed:!1,name:'value',type:'uint256'}],name:'Approval',type:'event'}],ERC20ValidatableABI=[{constant:!0,inputs:[{name:'_account',type:'address'},{name:'_value',type:'uint256'}],name:'isReceivingAllowed',outputs:[{name:'',type:'bool'}],payable:!1,type:'function'},{constant:!0,inputs:[{name:'_spender',type:'address'},{name:'_from',type:'address'},{name:'_to',type:'address'},{name:'_value',type:'uint256'}],name:'isTransferFromAllowed',outputs:[{name:'',type:'bool'}],payable:!1,type:'function'},{constant:!0,inputs:[{name:'_account',type:'address'},{name:'_value',type:'uint256'}],name:'isSpendingAllowed',outputs:[{name:'',type:'bool'}],payable:!1,type:'function'},{constant:!0,inputs:[{name:'_from',type:'address'},{name:'_spender',type:'address'},{name:'_value',type:'uint256'}],name:'isApproveAllowed',outputs:[{name:'',type:'bool'}],payable:!1,type:'function'},{constant:!0,inputs:[{name:'_from',type:'address'},{name:'_spender',type:'address'},{name:'_value',type:'uint256'}],name:'isApprovedSpendingAllowed',outputs:[{name:'',type:'bool'}],payable:!1,type:'function'},{constant:!0,inputs:[{name:'_from',type:'address'},{name:'_to',type:'address'},{name:'_value',type:'uint256'}],name:'isTransferAllowed',outputs:[{name:'',type:'bool'}],payable:!1,type:'function'}];function _getContract(a){if('ERC20'===a)return web3.eth.contract(ERC20ABI);if('ERC20Validatable'===a)return web3.eth.contract(ERC20ValidatableABI);throw new Error('ABI for the contractInterface '+a+' not found')}var getContract=(0,_memoize2.default)(_getContract);function _getContractInstance(a,b){var c=getContract(b);return c.at(a)}var getContractInstance=(0,_memoize2.default)(_getContractInstance);exports.default=getContractInstance,'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=initWeb3;var _web=require('web3'),_web2=_interopRequireDefault(_web);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function initWeb3(a,b){if(!isWeb3Injected()){var c=getRPCEndpoint(a,b),d=new _web2.default(new _web2.default.providers.HttpProvider(c));setGlobalWeb3(d)}}function isWeb3Injected(){var a='undefined'==typeof window?global:window;return!!a.isWeb3Injected||checkWeb3IsConnected(a.web3)}function getRPCEndpoint(a,b){return'http://'+a+':'+b}function setGlobalWeb3(a){var b='undefined'==typeof window?global:window;if(!checkWeb3IsConnected(a))throw new Error('Could not set web3 as global object because it is not connected to the node');b.web3=a,b.isWeb3Injected=!0}function checkWeb3IsConnected(a){var b=a&&a.isConnected();return!!b&&checkWeb3ethSupportedMethods(a)}function checkWeb3ethSupportedMethods(a){var b=a.eth;if(!b)throw new Error('web3.eth is not supported');return['getBalance','contract','sendRawTransaction','getTransactionCount','getGasPrice','estimateGas'].forEach(function(a){if(!(a in b))throw new Error('web3.eth.'+a+' is not supported')}),!0}'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=memoize;function memoize(a){var b={};return function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=d.join(':');if(f in b)return b[f];var g=a.apply(void 0,d);return b[f]=g,g}}'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=signTx;var _ethereumjsTx=require('ethereumjs-tx'),_ethereumjsTx2=_interopRequireDefault(_ethereumjsTx);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function signTx(a,b){var c=new _ethereumjsTx2.default(a);return c.sign(new Buffer(b,'hex')),c.serialize().toString('hex')}'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_toConsumableArray2=require('babel-runtime/helpers/toConsumableArray'),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),getRawTx=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b,c,d,e){return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=c,a.next=3,(0,_txUtils.getGasPrice)();case 3:return a.t1=a.sent,a.next=6,(0,_txUtils.getTxCount)(d);case 6:if(a.t2=a.sent,null==e){a.next=11;break}a.t3=e,a.next=14;break;case 11:return a.next=13,(0,_txUtils.getContractGasLimit)(b,c);case 13:a.t3=a.sent;case 14:return a.t4=a.t3,a.abrupt('return',{data:a.t0,gasPrice:a.t1,nonce:a.t2,gasLimit:a.t4});case 16:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),_bluebird=require('bluebird'),_bluebird2=_interopRequireDefault(_bluebird),_signTx=require('./signTx'),_signTx2=_interopRequireDefault(_signTx),_txUtils=require('./txUtils'),_getAddressFromPrivateKey=require('./getAddressFromPrivateKey'),_getAddressFromPrivateKey2=_interopRequireDefault(_getAddressFromPrivateKey);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}exports.default=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g=b.method,h=b.args,i=b.privateKey,j=b.gasLimit;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=g.getData.apply(g,(0,_toConsumableArray3.default)(h)),d=(0,_getAddressFromPrivateKey2.default)(i),a.next=4,getRawTx(g,c,d,j);case 4:return e=a.sent,f=(0,_signTx2.default)(i,e),a.abrupt('return',_bluebird2.default.promisify(web3.eth.sendRawTransaction)(f));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _regenerator=require('babel-runtime/regenerator'),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator'),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),getRawTx=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c=b.gasLimit,d=b.address,e=b.data,f=b.to,g=b.value;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=e,a.t1=f,a.t2=g,a.next=5,(0,_txUtils.getGasPrice)();case 5:return a.t3=a.sent,a.next=8,(0,_txUtils.getTxCount)(d);case 8:if(a.t4=a.sent,null==c){a.next=13;break}a.t5=c,a.next=16;break;case 13:return a.next=15,(0,_txUtils.getGasLimit)({data:e,to:f,value:g});case 15:a.t5=a.sent;case 16:return a.t6=a.t5,a.abrupt('return',{data:a.t0,to:a.t1,value:a.t2,gasPrice:a.t3,nonce:a.t4,gasLimit:a.t6});case 18:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),_bluebird=require('bluebird'),_bluebird2=_interopRequireDefault(_bluebird),_signTx=require('./signTx'),_signTx2=_interopRequireDefault(_signTx),_txUtils=require('./txUtils'),_getAddressFromPrivateKey=require('./getAddressFromPrivateKey'),_getAddressFromPrivateKey2=_interopRequireDefault(_getAddressFromPrivateKey);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}exports.default=function(){var a=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function a(b){var c,d,e,f,g,h,i,j;return _regenerator2.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.privateKey,d=b.gasLimit,e=b.data,f=b.to,g=b.value,h=(0,_getAddressFromPrivateKey2.default)(c),a.next=4,getRawTx({gasLimit:d,address:h,data:e,to:f,value:g});case 4:return i=a.sent,j=(0,_signTx2.default)(c,i),a.abrupt('return',_bluebird2.default.promisify(web3.eth.sendRawTransaction)(j));case 7:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _toConsumableArray2=require('babel-runtime/helpers/toConsumableArray'),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2);exports.getTxCount=getTxCount,exports.getGasPrice=getGasPrice,exports.getGasLimit=getGasLimit,exports.getContractGasLimit=getContractGasLimit;var _bluebird=require('bluebird'),_bluebird2=_interopRequireDefault(_bluebird);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function getTxCount(a){return _bluebird2.default.promisify(web3.eth.getTransactionCount)(a)}function getGasPrice(){return _bluebird2.default.promisify(web3.eth.getGasPrice)()}function getGasLimit(a){return _bluebird2.default.promisify(web3.eth.estimateGas)(a)}function getContractGasLimit(a,b,c){var d=b&&b.length?b:a.getData.apply(a,(0,_toConsumableArray3.default)(c));return _bluebird2.default.promisify(a.estimateGas)({data:d})}'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _joiBrowser=require('joi-browser'),_joiBrowser2=_interopRequireDefault(_joiBrowser),_validationRules=require('./validationRules'),_validationRules2=_interopRequireDefault(_validationRules);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var totalSupply=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required()}),balanceOf=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),owner:_validationRules2.default.address.required()}),transfer=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),privateKey:_validationRules2.default.privateKey.required(),to:_validationRules2.default.address.required(),value:_validationRules2.default.value.required(),gasLimit:_validationRules2.default.gasLimit}),getPastEvents=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),event:_validationRules2.default.event.required(),options:_validationRules2.default.eventOptions}),allEvents=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),options:_validationRules2.default.eventOptions,callback:_validationRules2.default.callback}),Transfer=allEvents,estimateGas=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),method:_validationRules2.default.method.required(),args:_validationRules2.default.args.required()});exports.default={totalSupply:totalSupply,balanceOf:balanceOf,transfer:transfer,getPastEvents:getPastEvents,allEvents:allEvents,Transfer:Transfer,estimateGas:estimateGas},'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _joiBrowser=require('joi-browser'),_joiBrowser2=_interopRequireDefault(_joiBrowser),_validationRules=require('./validationRules'),_validationRules2=_interopRequireDefault(_validationRules);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var isRegulated=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required()}),isReceivingAllowed=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),account:_validationRules2.default.address.required(),value:_validationRules2.default.value.required()}),isSpendingAllowed=isReceivingAllowed,isTransferAllowed=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),from:_validationRules2.default.address.required(),to:_validationRules2.default.address.required(),value:_validationRules2.default.value.required()}),isApproveAllowed=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),from:_validationRules2.default.address.required(),spender:_validationRules2.default.address.required(),value:_validationRules2.default.value.required()}),isApprovedSpendingAllowed=isApproveAllowed,isTransferFromAllowed=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),spender:_validationRules2.default.address.required(),from:_validationRules2.default.address.required(),to:_validationRules2.default.address.required(),value:_validationRules2.default.value.required()}),estimateGas=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),contractAddress:_validationRules2.default.address.required(),method:_validationRules2.default.method.required(),args:_validationRules2.default.args.required()});exports.default={isRegulated:isRegulated,isReceivingAllowed:isReceivingAllowed,isSpendingAllowed:isSpendingAllowed,isTransferAllowed:isTransferAllowed,isApproveAllowed:isApproveAllowed,isApprovedSpendingAllowed:isApprovedSpendingAllowed,isTransferFromAllowed:isTransferFromAllowed,estimateGas:estimateGas},'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _joiBrowser=require('joi-browser'),_joiBrowser2=_interopRequireDefault(_joiBrowser),_validationRules=require('./validationRules'),_validationRules2=_interopRequireDefault(_validationRules);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var sendTransaction=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),privateKey:_validationRules2.default.privateKey.required(),to:_validationRules2.default.address.required(),value:_validationRules2.default.value.required(),gasLimit:_validationRules2.default.gasLimit,data:_validationRules2.default.data}),getBalance=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),address:_validationRules2.default.address.required(),defaultBlock:_validationRules2.default.address}),estimateGas=_joiBrowser2.default.object().keys({rpcaddr:_validationRules2.default.host.required(),rpcport:_validationRules2.default.port.required(),to:_validationRules2.default.address.required(),value:_validationRules2.default.value.required(),data:_validationRules2.default.data});exports.default={sendTransaction:sendTransaction,getBalance:getBalance,estimateGas:estimateGas},'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.ERC20ValidatableSchemas=exports.ERC20Schemas=exports.ETHSchemas=exports.validate=void 0;var _validate=require('./validate'),_validate2=_interopRequireDefault(_validate),_ETHSchemas=require('./ETHSchemas'),_ETHSchemas2=_interopRequireDefault(_ETHSchemas),_ERC20Schemas=require('./ERC20Schemas'),_ERC20Schemas2=_interopRequireDefault(_ERC20Schemas),_ERC20ValidatableSchemas=require('./ERC20ValidatableSchemas'),_ERC20ValidatableSchemas2=_interopRequireDefault(_ERC20ValidatableSchemas);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}exports.validate=_validate2.default,exports.ETHSchemas=_ETHSchemas2.default,exports.ERC20Schemas=_ERC20Schemas2.default,exports.ERC20ValidatableSchemas=_ERC20ValidatableSchemas2.default,'use strict',Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=validate;var _bluebird=require('bluebird'),_bluebird2=_interopRequireDefault(_bluebird),_joiBrowser=require('joi-browser'),_joiBrowser2=_interopRequireDefault(_joiBrowser);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function validate(a,b){return new _bluebird2.default(function(c,d){return _joiBrowser2.default.validate(a,b,function(a,b){return a?d(a):c(b)})}).catch(function(a){throw new Error(a)})}'use strict',Object.defineProperty(exports,'__esModule',{value:!0});var _joiBrowser=require('joi-browser'),_joiBrowser2=_interopRequireDefault(_joiBrowser);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var validationRules={host:_joiBrowser2.default.string().hostname(),port:_joiBrowser2.default.number().integer().min(1).max(65535),address:_joiBrowser2.default.string().regex(/^[a-zA-Z0-9]+$/).length(42),privateKey:_joiBrowser2.default.string().alphanum().length(64),value:_joiBrowser2.default.number().positive(),event:_joiBrowser2.default.string().min(1).max(999),method:_joiBrowser2.default.string().min(1).max(999),args:_joiBrowser2.default.array(),data:_joiBrowser2.default.string().regex(/^[a-zA-Z0-9]+$/).max(9999),gasLimit:_joiBrowser2.default.number().positive(),callback:_joiBrowser2.default.func(),eventOptions:_joiBrowser2.default.object().keys({filter:_joiBrowser2.default.object(),fromBlock:[_joiBrowser2.default.number().integer().positive(),_joiBrowser2.default.string().min(6).max(7)],toBlock:[_joiBrowser2.default.number().integer().positive(),_joiBrowser2.default.string().min(6).max(7)],address:_joiBrowser2.default.string().regex(/^[a-zA-Z0-9]+$/).length(42),topics:_joiBrowser2.default.array()})};exports.default=validationRules;